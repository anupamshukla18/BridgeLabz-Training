/*
Exercise 3: Advanced Features
Build a library management system with:
• Book inventory
• Student borrowing records
• Fine calculation
• Search functionality with multiple filters
*/

1- Book inventory

		CREATE TABLE books (
		    book_id INT PRIMARY KEY,
		    title VARCHAR(100),
		    author VARCHAR(50),
		    category VARCHAR(50),
		    total_copies INT,
		    available_copies INT
		);
		
		
		INSERT INTO books VALUES
		(1, 'Java Basics', 'James Gosling', 'Programming', 5, 3),
		(2, 'DBMS Concepts', 'Korth', 'Database', 4, 2),
		(3, 'Python Guide', 'Guido', 'Programming', 6, 6);
		
		
		mysql> SELECT * FROM books;
		+---------+---------------+---------------+-------------+--------------+------------------+
		| book_id | title         | author        | category    | total_copies | available_copies |
		+---------+---------------+---------------+-------------+--------------+------------------+
		|       1 | JAVA BASICS   | JAMES GOSLING | PROGRAMMING |            5 |                3 |
		|       2 | DBMS CONCEPTS | KORTH         | DATABASE    |            4 |                2 |
		|       3 | PYRHON GUIDE  | GUIDO         | PROGRAMMING |            6 |                6 |
		+---------+---------------+---------------+-------------+--------------+------------------+
		
2- Student borrowing records
		
		CREATE TABLE students (
		    student_id INT PRIMARY KEY,
		    name VARCHAR(50)
		);
		
		
		CREATE TABLE borrow_records (
		    borrow_id INT PRIMARY KEY,
		    student_id INT,
		    book_id INT,
		    borrow_date DATE,
		    return_date DATE
		);
		
		
		INSERT INTO students VALUES
		(1, 'Amit'),
		(2, 'Riya');
		
		INSERT INTO borrow_records VALUES
		(101, 1, 1, '2026-01-01', NULL),
		(102, 2, 2, '2026-01-05', '2026-01-12');
		
		mysql> SELECT * FROM students;
		+------------+--------+
		| student_id | name   |
		+------------+--------+
		|          1 | Vikash |
		|          2 | Sakshi |
		+------------+--------+
		2 rows in set (0.00 sec)
		
		mysql> SELECT * FROM borrow_records;
		+-----------+------------+---------+-------------+-------------+
		| borrow_id | student_id | book_id | borrow_date | return_date |
		+-----------+------------+---------+-------------+-------------+
		|       101 |          1 |       1 | 2026-01-01  | NULL        |
		|       102 |          2 |       2 | 2026-01-05  | 2026-01-12  |
		+-----------+------------+---------+-------------+-------------+
		2 rows in set (0.00 sec)
		

3-  Fine calculation


		mysql>  SELECT borrow_id, student_id, book_id, DATEDIFF(CURDATE(), borrow_date)-7 AS late_days, (DATEDIFF(CURDATE(), borrow_date)-7)*5 AS fine_amount
		    -> FROM borrow_records
		    -> WHERE return_date IS NULL && DATEDIFF(CURDATE(), borrow_date)>7;
		+-----------+------------+---------+-----------+-------------+
		| borrow_id | student_id | book_id | late_days | fine_amount |
		+-----------+------------+---------+-----------+-------------+
		|       101 |          1 |       1 |        31 |         155 |
		+-----------+------------+---------+-----------+-------------+
		1 row in set, 1 warning (0.00 sec)
		
		
4- Search functionality with multiple filters

		Example 1: Search by author and category
		SELECT * 
		FROM books
		WHERE author = 'James Gosling'
		AND category = 'Programming';
		
		+---------+-------------+---------------+-------------+--------------+------------------+
		| book_id | title       | author        | category    | total_copies | available_copies |
		+---------+-------------+---------------+-------------+--------------+------------------+
		|       1 | JAVA BASICS | JAMES GOSLING | PROGRAMMING |            5 |                3 |
		+---------+-------------+---------------+-------------+--------------+------------------+
		1 row in set (0.00 sec)
		
		
		Example 2: Search books with available copies
		SELECT * 
		FROM books
		WHERE available_copies > 0;
		
	
		+---------+---------------+---------------+-------------+--------------+------------------+
		| book_id | title         | author        | category    | total_copies | available_copies |
		+---------+---------------+---------------+-------------+--------------+------------------+
		|       1 | JAVA BASICS   | JAMES GOSLING | PROGRAMMING |            5 |                3 |
		|       2 | DBMS CONCEPTS | KORTH         | DATABASE    |            4 |                2 |
		|       3 | PYRHON GUIDE  | GUIDO         | PROGRAMMING |            6 |                6 |
		+---------+---------------+---------------+-------------+--------------+------------------+
		3 rows in set (0.00 sec)
		
		
		Example 3: Search by title keyword
		SELECT * 
		FROM books
		WHERE title LIKE '%Java%';
		
		+---------+-------------+---------------+-------------+--------------+------------------+
		| book_id | title       | author        | category    | total_copies | available_copies |
		+---------+-------------+---------------+-------------+--------------+------------------+
		|       1 | JAVA BASICS | JAMES GOSLING | PROGRAMMING |            5 |                3 |
		+---------+-------------+---------------+-------------+--------------+------------------+
		1 row in set (0.00 sec)
