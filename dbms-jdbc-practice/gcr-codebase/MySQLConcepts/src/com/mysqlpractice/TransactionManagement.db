/*

Exercise 2: Transaction Management
Implement a banking system with:
• Transfer money between accounts (use transactions)
• Check balance
• Transaction history

*/

		use mysql_jdbc_practice;
		 
		CREATE TABLE account(
			account_id INT PRIMARY KEY,
		    name VARCHAR(50),
		    balance INT
		);
		
		CREATE TABLE transaction_history(
			txn_id INT AUTO_INCREMENT PRIMARY KEY,
		    from_account INT,
		    to_account INT,
		    amount INT,
		    txn_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
		);
		
		INSERT INTO account VALUES
		(1, 'Vikash', 2000),
		(2, 'Sakshi', 5000);

		

1- Transfer money between accounts (use transactions)

		START TRANSACTION;
		
		UPDATE account
		SET balance= balance-2000
		WHERE account_id=2;
		
		UPDATE account 
		SET balance= balance+2000
		WHERE account_id=1;
		
		INSERT into transaction_history(from_account, to_account, amount)
		VALUES
		(2,1,2000);
		
		COMMIT;
		

2- Check balance

		mysql> SELECT * FROM account;
		+------------+--------+---------+
		| account_id | name   | balance |
		+------------+--------+---------+
		|          1 | Vikash |    4000 |
		|          2 | Sakshi |    3000 |
		+------------+--------+---------+
		2 rows in set (0.00 sec)
		

3- Transaction history
		
		mysql> SELECT * FROM transaction_history;
		+--------+--------------+------------+--------+---------------------+
		| txn_id | from_account | to_account | amount | txn_date            |
		+--------+--------------+------------+--------+---------------------+
		|      1 |            2 |          1 |   2000 | 2026-02-08 14:27:27 |
		+--------+--------------+------------+--------+---------------------+
		1 row in set (0.00 sec)
			
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		